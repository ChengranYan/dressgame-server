webpackJsonp([1],{"+3or":function(t,e){},"/ewc":function(t,e){},"4zKF":function(t,e){},"7sh/":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n=a("Dd8w"),i=a.n(n),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"list"},[e("router-link",{staticClass:"item",attrs:{to:"/male",tag:"li"}},[e("span",{staticClass:"gender"},[this._v("男生")])]),this._v(" "),e("router-link",{staticClass:"item",attrs:{to:"/female",tag:"li"}},[e("span",{staticClass:"gender"},[this._v("女生")])])],1)},staticRenderFns:[]};var o=a("VU/8")({name:"tab"},r,!1,function(t){a("+3or")},"data-v-a3247f4a",null).exports,l=a("NYxO"),d=a("GQaK"),c={data:function(){return{maleclothes:{head:{rows:[]}},femaleclothes:{head:{rows:[]}},testMaleData:[],testFemaleData:[],background_reg:/background_/,decorate_reg:/decoration_cloth_/,head_frame_reg:/head_frame_/,detailId:"",part:"head",inFrameStatus:!1,maleToken:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjVhZTI5NjFhMjlhNzY5NTZlMWRlNGM3ZCIsInJvbGUiOiJzdHVkZW50IiwiaWF0IjoxNTY1ODU2NDU1LCJleHAiOjUxNjU4NTY0NTV9.Uhw5wHZQdFZpN67ZykslG0QDRya0S7jdRI9_H-q5Tzk",femaleToken:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjVhZTI5NzAyMjlhNzY5NTZlMWRlNGM3ZSIsInJvbGUiOiJzdHVkZW50IiwiaWF0IjoxNTY1ODU2NDk4LCJleHAiOjUxNjU4NTY0OTh9.coOnbECk3zsJAKVHKQWI9d1nyhWQ71sZ-luJ9vQVmn4"}},watch:{$route:function(t,e){this.part=this.$route.params.part,this.changeGender(this.$route.params.gender)}},computed:i()({},Object(l.c)(["gender"]),{isMale:function(){return"male"===this.gender},isTest:function(){return"test"===this.part},testData:function(){return"male"===this.gender?this.testMaleData:this.testFemaleData},detailUrl:function(){return"https://api-test.yangcong345.com/cosplay/handbook/"+this.part+"/"+this.detailId},token:function(){return"male"===this.gender?this.maleToken:this.femaleToken}}),mounted:function(){this.scroll=new d.a(".wrapper"),this.getDress("male"),this.getDress("female"),this.getTestData()},methods:i()({},Object(l.b)(["changeGender"]),{handleDressUp:function(t,e,a){var s=this;"true"===this.$refs[t][0].attributes.isdressed.value&&"decorate"!==this.part?(window.vm.COSPLAY_STAGE.setDefaultSlot(this.part),this.$refs[t][0].attributes.isdressed.value="false"):(this.inFrameStatus&&(window.vm.COSPLAY_STAGE.exitAvatar(),this.inFrameStatus=!1),this.detailId=t,this.$http({method:"get",url:this.detailUrl,headers:{Authorization:this.token}}).then(function(a){var n=a.data;"decorate"===s.part||"background"===s.part?s.handleDecorateDressUp(e,n.resources,t):(window.vm.COSPLAY_STAGE.setSlotDisplayByResources(n.resources),s.$refs[t][0].attributes.isdressed.value="true")}))},handleTestDressUp:function(t,e){"true"===this.$refs[e][0].attributes.isdressed.value?(window.vm.COSPLAY_STAGE.setDefaultSlot(this.partReturn(e)),this.$refs[e][0].attributes.isdressed.value="false"):(window.vm.COSPLAY_STAGE.setSlotDisplayByResources(this.testData[t].resources),this.$refs[e][0].attributes.isdressed.value="true")},partReturn:function(t){return/head/.test(t)?"head":/body/.test(t)?"body":/leg/.test(t)?"leg":/foot/.test(t)?"foot":/decoration_cloth/.test(t)?"bonusDecorate":""},handleDecorateDressUp:function(t,e,a){this.isBackground(t)?this.setBackground(e):this.isHeadFrame(t)?(this.inFrameStatus=!0,window.vm.COSPLAY_STAGE.entryAvatar(e.back,e.front)):this.isDecorateCloth(t)&&("true"===this.$refs[a][0].attributes.isdressed.value?(window.vm.COSPLAY_STAGE.setDefaultSlot("bonusDecorate"),this.$refs[a][0].attributes.isdressed.value="false"):(window.vm.COSPLAY_STAGE.setSlotDisplayByResources(e),this.$refs[a][0].attributes.isdressed.value="true"))},getDress:function(t){var e=this;this.$http({method:"get",url:"https://api-test.yangcong345.com/cosplay/handbook",headers:{Authorization:"male"===t?this.maleToken:this.femaleToken}}).then(function(a){"male"===t?e.maleclothes=a.data:e.femaleclothes=a.data})},setBackground:function(t){window.vm.document.body.style.backgroundImage="url("+t+")"},isBackground:function(t){return this.background_reg.test(t)},isDecorateCloth:function(t){return this.decorate_reg.test(t)},isHeadFrame:function(t){return this.head_frame_reg.test(t)},getTestData:function(){var t=this;this.$http({method:"get",url:"http://10.8.8.8:60000/cosplay/handbook/testcontent"}).then(function(e){console.log(e.data),t.testMaleData=e.data.maleData,t.testFemaleData=e.data.femaleData})}})},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[t.isTest?[a("ul",t._l(t.testData,function(e,s){return e.thumbnail?a("li",{key:s},[a("div",{ref:e.thumbnail,refInFor:!0,staticClass:"img-con",attrs:{isdressed:"false"},on:{click:function(a){return t.handleTestDressUp(s,e.thumbnail)}}},[a("img",{attrs:{src:e.thumbnail}})]),t._v(" "),a("p",[a("span",[t._v(t._s(e.name))])])]):t._e()}),0)]:t._e(),t._v(" "),!t.isTest&&t.isMale?[a("ul",t._l(t.maleclothes[t.part].rows,function(e){return e.thumbnail?a("li",{key:e.id},[a("div",{ref:e.id,refInFor:!0,staticClass:"img-con",attrs:{isdressed:"false"},on:{click:function(a){return t.handleDressUp(e.id,e.thumbnail,a)}}},[a("img",{attrs:{src:e.thumbnail,"data-id":e.id}})]),t._v(" "),a("p",[a("span",[t._v(t._s(e.name))])])]):t._e()}),0)]:t._e(),t._v(" "),t.isTest||t.isMale?t._e():[a("ul",t._l(t.femaleclothes[t.part].rows,function(e){return e.thumbnail?a("li",{key:e.id},[a("div",{ref:e.id,refInFor:!0,staticClass:"img-con",attrs:{isdressed:"false"},on:{click:function(a){return t.handleDressUp(e.id,e.thumbnail,a)}}},[a("img",{attrs:{src:e.thumbnail,"data-id":e.id}})]),t._v(" "),a("p",[t._v(t._s(e.name))])]):t._e()}),0)]],2)},staticRenderFns:[]};var h=a("VU/8")(c,u,!1,function(t){a("TDTn")},"data-v-fa3cf35c",null).exports,m={name:"tab",data:function(){return{tab1:"/design/male",parts:[{name:"头部",to:"head"},{name:"上衣",to:"body"},{name:"下装",to:"leg"},{name:"鞋子",to:"foot"},{name:"饰品",to:"decorate"}],test:{name:"测试",to:"test"}}},mounted:function(){this.setWidth()},methods:{setWidth:function(){this.$refs.container.style.width=window.innerHeight/2*2.5+"px"}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{ref:"container",staticClass:"head-bar-con"},[t._l(t.parts,function(e,s){return a("router-link",{key:s,staticClass:"head-bar",attrs:{to:e.to,tag:"li"}},[a("span",{staticClass:"part"},[t._v(t._s(e.name))])])}),t._v(" "),a("router-link",{key:t.test.name,staticClass:"head-bar",attrs:{to:t.test.to,tag:"li"}},[a("span",{staticClass:"part"},[t._v(t._s(t.test.name))])])],2)},staticRenderFns:[]};var p={name:"app",components:{Tab:o,Display:h,HeadBar:a("VU/8")(m,f,!1,function(t){a("4zKF")},"data-v-c4794938",null).exports},data:function(){return{vm:{}}},mounted:function(){this.bindEvents(),this.setWidth()},computed:i()({},Object(l.c)(["gender"]),{cosplayUri:function(){return"/static/index.html?gender="+this.gender},width:function(){return window.innerHeight/2*2.5}}),methods:{loaded:function(){var t=this;this.vm=this.$refs.iframe.contentWindow,window.vm=this.vm,setTimeout(function(){t.vm.COSPLAY_STAGE.playBoneAnimation()},500)},setWidth:function(){},bindEvents:function(){var t=this;window.onresize=function(){t.vm.location.reload()}},handleInputFile:function(t){var e=new FormData;e.append("logo",t.target.files);for(var a=0;a<t.target.files.length;a++){var s=t.target.files[a];e.append("logo",s)}this.$http.post("http://localhost:6000/cosplay/handbook/upload",e).catch(function(t){console.log("error"+t)})}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("iframe",{ref:"iframe",staticClass:"iframe",attrs:{src:this.cosplayUri},on:{load:this.loaded}}),this._v(" "),e("Tab"),this._v(" "),e("HeadBar",{ref:"headbar",staticClass:"head-bar"}),this._v(" "),e("keep-alive",[e("router-view",{staticClass:"app-main"})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,v,!1,function(t){a("7sh/")},"data-v-5b62094a",null).exports,_=a("mtWM"),b=a.n(_),w=a("/ocq");s.a.use(w.a);var D=new w.a({routes:[{path:"/",redirect:"/male/head"},{path:"/:gender",component:h,children:[{path:"",redirect:"head"},{path:":part",redirect:""}]}]});s.a.use(l.a);var k=new l.a.Store({state:{gender:"male"},mutations:{changeGender:function(t,e){t.gender=e}}}),T=a("AXdl");a("/ewc"),a("wOs/"),a("v2ns");s.a.use(T.a,{preLoad:1.2,loading:"src/assets/imgs/loading.gif",attempt:1}),s.a.config.productionTip=!1,s.a.prototype.$http=b.a,new s.a({el:"#app",router:D,store:k,template:"<App/>",components:{App:g}})},TDTn:function(t,e){},v2ns:function(t,e){},"wOs/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3f4cde9195e401d137c0.js.map